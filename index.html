<script type=module>const t=document.getElementsByTagName("canvas")[0],e=t.t("2d");function i(){t.e=window.innerWidth,t.i=window.innerHeight}function n(){e.n="#121212",e.a(0,0,t.e,t.i)}function a(t,e){const n=t.s+e.s;return Math.sqrt(Math.pow(t.o-e.o,2)+Math.pow(t.r-e.r,2))<n}function s(n,o,s){e.c="#eee",e.u=o+"em sans-serif";const a=t.e/2,r=e.d(n).e;e.h(n,a-r/2,s)}function o(t){const e=t;return void 0!==e.f&&void 0!==e.l&&void 0!==e.M}function r(t){const e=t;return o(t)&&void 0!==e.s&&void 0!==e.y&&void 0!==e.v}function c(t){return"collectible"===t.x}function u(t){return t.p}function d(t,e){const n=t.m(e);n>-1&&t.F(n,1)}let h=!1;const f=new class{w(){this.b=0,this.G="#ffe",this.g=3,this.k=200,this.E=[...Array(100)].L(t=>[Math.round(2e3*Math.random()),Math.round(2e3*Math.random())])}P(t){this.b+=t}j(){const t=this.g,n=this.k;let o=Math.round(this.b/n);this.E.A(([n,s])=>{switch(o=(o+1)%4,e.n=this.G,o){case 0:e.a(n,s,t,t);break;case 1:case 3:e.a(n-t,s,3*t,t),e.a(n,s-t,t,3*t);break;case 2:e.a(n-t,s,3*t,t),e.a(n,s-t,t,3*t),e.n="#121212",e.a(n,s,t,t)}})}},l={C:0,S:[{o:300,r:200,f:100,l:!1,s:10,y:"#fff",M:!0,v:.5*Math.PI,p:!0,q:0,$:1,z:{D:0,H:0},x:"player"},{o:300,r:300,f:100,l:!1,s:30,y:"#f00",M:!0,v:.5*Math.PI,x:"planet"},{o:600,r:300,f:100,l:!1,s:30,y:"#33f",M:!0,v:0,x:"planet"},{o:130,r:305,f:5,l:!1,s:5,y:"#0f0",M:!1,z:{D:.03,H:.03},x:"asteroid"},{o:50,r:35,f:5,l:!1,s:5,y:"#0f0",M:!1,z:{D:.03,H:-.03},v:0,x:"asteroid"}]};function M(t,e){const n=t.S;f.P(e);const s=n.R(u);if(h){if(s.M){const t=.2*s.$*e;let n=s.q+t;n>100?(s.$=-1,n-=n-100):n<0&&(s.$=1,n=Math.abs(n)),s.q=n}}else{const t=s.q;t&&(s.q=0,s.$=1,s.M=!1,s.z.H=.002*t)}const i=n.U(o);i.U(t=>!t.M).A(o=>{var s;if(c(o))return void function(t,e){t.X+=t.Y*(e/1e3),t.o=t.B*Math.cos(t.X)+t.I,t.r=t.B*Math.sin(t.X)+t.J}(o,e);o.z=null!=(s=o.z)?s:{D:0,H:0};let f=0,h=0;i.A(t=>{if(o===t)return;const e=t.o-o.o||1e-8,n=t.r-o.r||1e-8,s=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),a=2e-5*o.f/(s*Math.sqrt(s+.15));f+=e*a,h+=n*a}),o.z.D+=f*e,o.z.H+=h*e,r(o)&&(o.v=Math.atan2(h,f)),o.o+=o.z.D*e,o.r+=o.z.H*e,n.A(e=>{e===o||u(e)||(u(o)?r(e)&&a(o,e)&&function(t,e,n){const o=n.S;c(e)&&(n.C+=e.C,d(o,e))}(0,e,t):r(e)&&r(o)&&a(e,o)&&(console.log("Collision!"),d(n,o),e.M||d(n,e)))})})}l.S.A(t=>{if("planet"===t.x){const e=Math.floor(10*Math.random()+10),n=[...new Array(e)].L(e=>({o:0,r:0,I:t.o,J:t.r,Y:(.1*Math.random()+.1)*(Math.random()<.5?-1:1),X:Math.random()*Math.PI*2,B:50*Math.random()+100,C:1,s:3,y:"#fff",v:0,f:0,l:!1,M:!1,x:"collectible"}));l.S=l.S.K(n)}});let y=!1,v=0;function x(o){if(y)return n(),e.n="#222",e.a(0,0,t.e,t.i),s("Planet Hoppers",6,150),void s("Press Space to Resume",3,300);n();const a=l.S;Math.floor(o/1e3)-Math.floor(v/1e3)&&a.N({o:Math.random()*t.e,r:Math.random()*t.i,f:5,l:!1,s:5,y:"#0f0",M:!1,z:{D:.03,H:-.03},v:0,x:"asteroid"});const i=o-v;var c;v=o,console.debug("FPS: "+1e3/i),M(l,i),f.j(),a.A(t=>{if(r(t)&&(e.O(),e.n=function(t,n,o,s,a,r,i){const c=e.Q(o,s,o+Math.cos(i)*a,s+Math.sin(i)*r);return c.T(0,t),c.T(1,"#000"),c}(t.y,0,t.o,t.r,2*t.s,2*t.s,t.v),e.V(t.o,t.r,t.s,0,2*Math.PI),e.W()),u(t)){const{o:n,r:o,q:s,s:a}=t;if(!s)return;e.n="#e43";const r=n+a+10,i=o-s;e.a(r,i,10,s)}}),c=l,e.n="#eee",e.u="30px sans-serif",e.Z("Points: "+c.C,10,40)}function p(){y=!0}function m(t){switch(t._){case"Escape":return void p();case" ":return t.tt(),y&&(y=!1),void(h=!0);default:console.debug("Unhandled keypress",t._)}}function F(t){switch(t._){case" ":t.tt(),h=!1}}!function(){const t=e=>{x(e),requestAnimationFrame(t)};requestAnimationFrame(t),addEventListener("blur",p),addEventListener("keydown",m),addEventListener("keyup",F),addEventListener("resize",i),i()}()</script><style>*{margin:0;overflow:hidden}</style><canvas/>